{
  "issue_id": 1965,
  "issue_url": "https://github.com/google/gson/issues/1965",
  "title": "`FieldNamingPolicy.upperCaseFirstLetter` uppercases trailing non-letters",
  "description": "<p dir=\"auto\">The internal method <code class=\"notranslate\">FieldNamingPolicy.upperCaseFirstLetter(String)</code> which is used by some of the <code class=\"notranslate\">FieldNamingPolicy</code> constants erroneously uppercases trailing non-letters. The reason for this is that for the last character it is not checked whether it is a letter or not.<br>\nThere are some Unicode characters which are not letters, but for which <code class=\"notranslate\">toUpperCase</code> returns a different character. An example for this is <code class=\"notranslate\">U+0345</code> for which the uppercase character is <code class=\"notranslate\">U+0399</code>.</p>\n<p dir=\"auto\">Example:</p>\n<div class=\"highlight highlight-source-java notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"// Remains unchanged when it is not trailing\nInteger.toHexString(upperCaseFirstLetter(\"\\u0345_\").charAt(0))\n// Erroneously uppercased when trailing\nInteger.toHexString(upperCaseFirstLetter(\"\\u0345\").charAt(0))\"><pre><span class=\"pl-c\">// Remains unchanged when it is not trailing</span>\n<span class=\"pl-s1\">Integer</span>.<span class=\"pl-en\">toHexString</span>(<span class=\"pl-en\">upperCaseFirstLetter</span>(<span class=\"pl-s\">\"\\u0345_\"</span>).<span class=\"pl-en\">charAt</span>(<span class=\"pl-c1\">0</span>))\n<span class=\"pl-c\">// Erroneously uppercased when trailing</span>\n<span class=\"pl-s1\">Integer</span>.<span class=\"pl-en\">toHexString</span>(<span class=\"pl-en\">upperCaseFirstLetter</span>(<span class=\"pl-s\">\"\\u0345\"</span>).<span class=\"pl-en\">charAt</span>(<span class=\"pl-c1\">0</span>))</pre></div>\n<p dir=\"auto\">However, despite this character being allowed in a field name (<code class=\"notranslate\">Character.isJavaIdentifierPart('\\u0345')</code> is <code class=\"notranslate\">true</code>), this only affects non-ASCII characters and it is therefore rather unlikely that this issue ever occurs in reality.</p>",
  "description_text": "The internal method FieldNamingPolicy.upperCaseFirstLetter(String) which is used by some of the FieldNamingPolicy constants erroneously uppercases trailing non-letters. The reason for this is that for the last character it is not checked whether it is a letter or not.\nThere are some Unicode characters which are not letters, but for which toUpperCase returns a different character. An example for this is U+0345 for which the uppercase character is U+0399.\nExample:\n// Remains unchanged when it is not trailing\nInteger.toHexString(upperCaseFirstLetter(\"\\u0345_\").charAt(0))\n// Erroneously uppercased when trailing\nInteger.toHexString(upperCaseFirstLetter(\"\\u0345\").charAt(0))\nHowever, despite this character being allowed in a field name (Character.isJavaIdentifierPart('\\u0345') is true), this only affects non-ASCII characters and it is therefore rather unlikely that this issue ever occurs in reality."
}