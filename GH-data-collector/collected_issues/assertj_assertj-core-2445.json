{
  "issue_id": 2444,
  "issue_url": "https://github.com/assertj/assertj/issues/2444",
  "title": "isExactlyInstanceOf gives confusing error message when instance is an anonymous inner class",
  "description": "<h4 dir=\"auto\">Summary</h4>\n<p dir=\"auto\">When using isExactlyInstanceOf and the actual value is an anonymous inner class, the message is confusing as it claims that the actual value is an \"instance of null\".</p>\n<h4 dir=\"auto\">Example</h4>\n<div class=\"highlight highlight-source-java notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"    assertThat(x.red).isNotNull().isExactlyInstanceOf(A.class);\"><pre>    <span class=\"pl-en\">assertThat</span>(<span class=\"pl-s1\">x</span>.<span class=\"pl-s1\">red</span>).<span class=\"pl-en\">isNotNull</span>().<span class=\"pl-en\">isExactlyInstanceOf</span>(<span class=\"pl-smi\">A</span>.<span class=\"pl-s1\">class</span>);</pre></div>\n<p dir=\"auto\">Will not fail <code class=\"notranslate\">isNotNull</code> but fails on <code class=\"notranslate\">isExactlyInstanceOf</code> with:</p>\n<div class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"java.lang.AssertionError: \nExpecting:\n <hs.ddif.core.inject.store.BindingProvider$ProviderBinding$1@4f1bfe23>\nto be exactly an instance of:\n <hs.ddif.core.InjectorProviderTest.A>\nbut was an instance of:\n <null>\"><pre class=\"notranslate\"><code>java.lang.AssertionError: \nExpecting:\n <hs.ddif.core.inject.store.BindingProvider$ProviderBinding$1@4f1bfe23>\nto be exactly an instance of:\n <hs.ddif.core.InjectorProviderTest.A>\nbut was an instance of:\n <null>\n</code></pre></div>\n<p dir=\"auto\">This led me to believe the value in <code class=\"notranslate\">x.red</code> is <code class=\"notranslate\">null</code>, but it clearly isn't.</p>\n<p dir=\"auto\">If it is not possible to detect the anonymous inner class type here  (it in this case is an anonymous implementation of the interface <code class=\"notranslate\">Provider</code>) perhaps change the message to <code class=\"notranslate\">but was an instance of an anonymous class</code>.</p>",
  "description_text": "Summary\nWhen using isExactlyInstanceOf and the actual value is an anonymous inner class, the message is confusing as it claims that the actual value is an \"instance of null\".\nExample\n    assertThat(x.red).isNotNull().isExactlyInstanceOf(A.class);\nWill not fail isNotNull but fails on isExactlyInstanceOf with:\njava.lang.AssertionError: \nExpecting:\n \nto be exactly an instance of:\n \nbut was an instance of:\n \n\nThis led me to believe the value in x.red is null, but it clearly isn't.\nIf it is not possible to detect the anonymous inner class type here  (it in this case is an anonymous implementation of the interface Provider) perhaps change the message to but was an instance of an anonymous class."
}