{
  "issue_id": 10945,
  "issue_url": "https://github.com/checkstyle/checkstyle/issues/10945",
  "title": "OperatorWrap with token ASSIGN too strict for annotations",
  "description": "<p dir=\"auto\">I have read check documentation: <a href=\"https://checkstyle.sourceforge.io/config_whitespace.html#OperatorWrap\" rel=\"nofollow\">https://checkstyle.sourceforge.io/config_whitespace.html#OperatorWrap</a><br>\nI have downloaded the latest checkstyle from: <a href=\"https://checkstyle.org/cmdline.html#Download_and_Run\" rel=\"nofollow\">https://checkstyle.org/cmdline.html#Download_and_Run</a><br>\nI have executed the cli and showed it below, as cli describes the problem better than 1,000 words</p>\n<div class=\"highlight highlight-source-shell notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"/var/tmp $ javac OperatorWrapExample.java\n\n/var/tmp $ cat config.xml\n<?xml version=\"1.0\"?>\n<!DOCTYPE module PUBLIC\n        \"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN\"\n        \"https://checkstyle.org/dtds/configuration_1_3.dtd\">\n<module name=\"Checker\">\n  <module name=\"TreeWalker\">\n    <module name=\"OperatorWrap\">\n      <property name=\"tokens\" value=\"ASSIGN\"/>\n    </module>\n  </module>\n</module>\n\n/var/tmp $ cat OperatorWrapExample.java\n@Annotation(example = {\n        \"foo\",\n        \"bar\"\n})\npublic class OperatorWrapExample {\n\n    public String[] array = {\n            \"foo\",\n            \"bar\"\n    };\n}\n\n@interface Annotation {\n    String[] example();\n}\n\n/var/tmp $ RUN_LOCALE=\"-Duser.language=en -Duser.country=US\"\n/var/tmp $ java $RUN_LOCALE -jar checkstyle-9.1-all.jar -c config.xml OperatorWrapExample.java\nStarting audit...\n[ERROR] I:\\_tmp\\_checkstyle\\OperatorWrapExample.java:1:21: '=' should be on a new line. [OperatorWrap]\nAudit done.\nCheckstyle ends with 1 errors.\"><pre>/var/tmp $ javac OperatorWrapExample.java\n\n/var/tmp $ cat config.xml\n<span class=\"pl-k\"><</span><span class=\"pl-k\">?</span>xml version=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>1.0<span class=\"pl-pds\">\"</span></span><span class=\"pl-k\">?</span><span class=\"pl-k\">></span>\n<span class=\"pl-k\"><</span><span class=\"pl-k\">!</span>DOCTYPE module PUBLIC\n        <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>-//Checkstyle//DTD Checkstyle Configuration 1.3//EN<span class=\"pl-pds\">\"</span></span>\n        <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>https://checkstyle.org/dtds/configuration_1_3.dtd<span class=\"pl-pds\">\"</span></span><span class=\"pl-k\">></span>\n<span class=\"pl-k\"><</span>module name=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Checker<span class=\"pl-pds\">\"</span></span><span class=\"pl-k\">></span>\n  <span class=\"pl-k\"><</span>module name=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>TreeWalker<span class=\"pl-pds\">\"</span></span><span class=\"pl-k\">></span>\n    <span class=\"pl-k\"><</span>module name=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>OperatorWrap<span class=\"pl-pds\">\"</span></span><span class=\"pl-k\">></span>\n      <span class=\"pl-k\"><</span>property name=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>tokens<span class=\"pl-pds\">\"</span></span> value=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>ASSIGN<span class=\"pl-pds\">\"</span></span>/<span class=\"pl-k\">></span>\n    <span class=\"pl-k\"><</span>/module<span class=\"pl-k\">></span>\n  <span class=\"pl-k\"><</span>/module<span class=\"pl-k\">></span>\n<span class=\"pl-k\"><</span>/module<span class=\"pl-k\">></span>\n\n/var/tmp $ cat OperatorWrapExample.java\n@Annotation(example = {\n        <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>foo<span class=\"pl-pds\">\"</span></span>,\n        <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>bar<span class=\"pl-pds\">\"</span></span>\n})\npublic class OperatorWrapExample {\n\n    public String[] array = {\n            <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>foo<span class=\"pl-pds\">\"</span></span>,\n            <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>bar<span class=\"pl-pds\">\"</span></span>\n    }<span class=\"pl-k\">;</span>\n}\n\n@interface Annotation {\n    String[] <span class=\"pl-en\">example</span>();\n}\n\n/var/tmp $ RUN_LOCALE=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>-Duser.language=en -Duser.country=US<span class=\"pl-pds\">\"</span></span>\n/var/tmp $ java <span class=\"pl-smi\">$RUN_LOCALE</span> -jar checkstyle-9.1-all.jar -c config.xml OperatorWrapExample.java\nStarting audit...\n[ERROR] I:<span class=\"pl-cce\">\\_</span>tmp<span class=\"pl-cce\">\\_</span>checkstyle<span class=\"pl-cce\">\\O</span>peratorWrapExample.java:1:21: <span class=\"pl-s\"><span class=\"pl-pds\">'</span>=<span class=\"pl-pds\">'</span></span> should be on a new line. [OperatorWrap]\nAudit done.\nCheckstyle ends with 1 errors.</pre></div>\n<hr>\n<p dir=\"auto\">In the above example, the array field allows the first element to be on a new line. If the same is done for an annotation, Checkstyle complains. The only way to \"fix\" this is to put the first element on the same line as the <code class=\"notranslate\">= {</code>. I expect the same behaviour in annotations as in other code.</p>",
  "description_text": "I have read check documentation: https://checkstyle.sourceforge.io/config_whitespace.html#OperatorWrap\nI have downloaded the latest checkstyle from: https://checkstyle.org/cmdline.html#Download_and_Run\nI have executed the cli and showed it below, as cli describes the problem better than 1,000 words\n\n\n\n\n\n\n\n\n\n\n/var/tmp $ cat OperatorWrapExample.java\n@Annotation(example = {\n        \"foo\",\n        \"bar\"\n})\npublic class OperatorWrapExample {\n\n    public String[] array = {\n            \"foo\",\n            \"bar\"\n    };\n}\n\n@interface Annotation {\n    String[] example();\n}\n\n/var/tmp $ RUN_LOCALE=\"-Duser.language=en -Duser.country=US\"\n/var/tmp $ java $RUN_LOCALE -jar checkstyle-9.1-all.jar -c config.xml OperatorWrapExample.java\nStarting audit...\n[ERROR] I:\\_tmp\\_checkstyle\\OperatorWrapExample.java:1:21: '=' should be on a new line. [OperatorWrap]\nAudit done.\nCheckstyle ends with 1 errors.\">/var/tmp $ javac OperatorWrapExample.java\n\n/var/tmp $ cat config.xml\n<?xml version=\"1.0\"?>\n<!DOCTYPE module PUBLIC\n        \"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN\"\n        \"https://checkstyle.org/dtds/configuration_1_3.dtd\">\n<module name=\"Checker\">\n  <module name=\"TreeWalker\">\n    <module name=\"OperatorWrap\">\n      <property name=\"tokens\" value=\"ASSIGN\"/>\n    </module>\n  </module>\n</module>\n\n/var/tmp $ cat OperatorWrapExample.java\n@Annotation(example = {\n        \"foo\",\n        \"bar\"\n})\npublic class OperatorWrapExample {\n\n    public String[] array = {\n            \"foo\",\n            \"bar\"\n    };\n}\n\n@interface Annotation {\n    String[] example();\n}\n\n/var/tmp $ RUN_LOCALE=\"-Duser.language=en -Duser.country=US\"\n/var/tmp $ java $RUN_LOCALE -jar checkstyle-9.1-all.jar -c config.xml OperatorWrapExample.java\nStarting audit...\n[ERROR] I:\\_tmp\\_checkstyle\\OperatorWrapExample.java:1:21: '=' should be on a new line. [OperatorWrap]\nAudit done.\nCheckstyle ends with 1 errors.\n\nIn the above example, the array field allows the first element to be on a new line. If the same is done for an annotation, Checkstyle complains. The only way to \"fix\" this is to put the first element on the same line as the = {. I expect the same behaviour in annotations as in other code."
}