{
  "issue_id": 10855,
  "issue_url": "https://github.com/checkstyle/checkstyle/issues/10855",
  "title": "UnusedImports error if there are only array references to a given class",
  "description": "<div class=\"highlight highlight-source-shell notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"slovdahl@desk:~/checkstyle-unused-import-bug-reproducer/src/main/java (main)$ javac checkstyle/reproducer/UnusedImportBug.java \nslovdahl@desk:~/checkstyle-unused-import-bug-reproducer/src/main/java (main)$ \n\nslovdahl@desk:~/checkstyle-unused-import-bug-reproducer (main)$ cat gradle/checkstyle/checkstyle.xml \n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE module PUBLIC\n        \"-//Puppy Crawl//DTD Check Configuration 1.3//EN\"\n        \"http://www.puppycrawl.com/dtds/configuration_1_3.dtd\">\n<module name=\"Checker\">\n    <module name=\"TreeWalker\">\n        <module name=\"UnusedImports\">\n            <property name=\"processJavadoc\" value=\"true\"/>\n        </module>\n    </module>\n</module>\n\n\nslovdahl@desk:~/checkstyle-unused-import-bug-reproducer (main)$ cat src/main/java/checkstyle/reproducer/UnusedImportBug.java \npackage checkstyle.reproducer;\n\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.Set;\n\npublic class UnusedImportBug {\n\n    private static final Set<String> FOO;\n    static {\n        FOO = new HashSet<>();\n\n        FOO.add( HashMap[].class.getName() );\n    }\n}\n\n\nslovdahl@desk:~/checkstyle-unused-import-bug-reproducer (main)$ RUN_LOCALE=\"-Duser.language=en -Duser.country=US\"\nslovdahl@desk:~/checkstyle-unused-import-bug-reproducer (main)$ java $RUN_LOCALE -jar checkstyle-9.0.1-all.jar -c gradle/checkstyle/checkstyle.xml src/main/java/checkstyle/reproducer/UnusedImportBug.java\nStarting audit...\n[ERROR] /home/slovdahl/checkstyle-unused-import-bug-reproducer/src/main/java/checkstyle/reproducer/UnusedImportBug.java:3:8: Unused import - java.util.HashMap. [UnusedImports]\nAudit done.\nCheckstyle ends with 1 errors.\n\"><pre>slovdahl@desk:<span class=\"pl-k\">~</span>/checkstyle-unused-import-bug-reproducer/src/main/java (main)$ javac checkstyle/reproducer/UnusedImportBug.java \nslovdahl@desk:<span class=\"pl-k\">~</span>/checkstyle-unused-import-bug-reproducer/src/main/java (main)$ \n\nslovdahl@desk:<span class=\"pl-k\">~</span>/checkstyle-unused-import-bug-reproducer (main)$ cat gradle/checkstyle/checkstyle.xml \n<span class=\"pl-k\"><</span><span class=\"pl-k\">?</span>xml version=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>1.0<span class=\"pl-pds\">\"</span></span> encoding=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>UTF-8<span class=\"pl-pds\">\"</span></span><span class=\"pl-k\">?</span><span class=\"pl-k\">></span>\n<span class=\"pl-k\"><</span><span class=\"pl-k\">!</span>DOCTYPE module PUBLIC\n        <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>-//Puppy Crawl//DTD Check Configuration 1.3//EN<span class=\"pl-pds\">\"</span></span>\n        <span class=\"pl-s\"><span class=\"pl-pds\">\"</span>http://www.puppycrawl.com/dtds/configuration_1_3.dtd<span class=\"pl-pds\">\"</span></span><span class=\"pl-k\">></span>\n<span class=\"pl-k\"><</span>module name=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>Checker<span class=\"pl-pds\">\"</span></span><span class=\"pl-k\">></span>\n    <span class=\"pl-k\"><</span>module name=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>TreeWalker<span class=\"pl-pds\">\"</span></span><span class=\"pl-k\">></span>\n        <span class=\"pl-k\"><</span>module name=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>UnusedImports<span class=\"pl-pds\">\"</span></span><span class=\"pl-k\">></span>\n            <span class=\"pl-k\"><</span>property name=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>processJavadoc<span class=\"pl-pds\">\"</span></span> value=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>true<span class=\"pl-pds\">\"</span></span>/<span class=\"pl-k\">></span>\n        <span class=\"pl-k\"><</span>/module<span class=\"pl-k\">></span>\n    <span class=\"pl-k\"><</span>/module<span class=\"pl-k\">></span>\n<span class=\"pl-k\"><</span>/module<span class=\"pl-k\">></span>\n\n\nslovdahl@desk:<span class=\"pl-k\">~</span>/checkstyle-unused-import-bug-reproducer (main)$ cat src/main/java/checkstyle/reproducer/UnusedImportBug.java \npackage checkstyle.reproducer<span class=\"pl-k\">;</span>\n\nimport java.util.HashMap<span class=\"pl-k\">;</span>\nimport java.util.HashSet<span class=\"pl-k\">;</span>\nimport java.util.Set<span class=\"pl-k\">;</span>\n\npublic class UnusedImportBug {\n\n    private static final Set<span class=\"pl-k\"><</span>String<span class=\"pl-k\">></span> FOO<span class=\"pl-k\">;</span>\n    static {\n        FOO = new <span class=\"pl-en\">HashSet<></span>();\n\n        FOO.add( <span class=\"pl-en\">HashMap[].class.getName</span>() );\n    }\n}\n\n\nslovdahl@desk:<span class=\"pl-k\">~</span>/checkstyle-unused-import-bug-reproducer (main)$ RUN_LOCALE=<span class=\"pl-s\"><span class=\"pl-pds\">\"</span>-Duser.language=en -Duser.country=US<span class=\"pl-pds\">\"</span></span>\nslovdahl@desk:<span class=\"pl-k\">~</span>/checkstyle-unused-import-bug-reproducer (main)$ java <span class=\"pl-smi\">$RUN_LOCALE</span> -jar checkstyle-9.0.1-all.jar -c gradle/checkstyle/checkstyle.xml src/main/java/checkstyle/reproducer/UnusedImportBug.java\nStarting audit...\n[ERROR] /home/slovdahl/checkstyle-unused-import-bug-reproducer/src/main/java/checkstyle/reproducer/UnusedImportBug.java:3:8: Unused import - java.util.HashMap. [UnusedImports]\nAudit done.\nCheckstyle ends with 1 errors.\n</pre></div>\n<hr>\n<p dir=\"auto\"><strong>Describe what you expect in detail.</strong></p>\n<p dir=\"auto\">The <code class=\"notranslate\">UnusedImport</code> error should not be triggered if an import is actually used.</p>\n<hr>\n<p dir=\"auto\">MCVE: <a href=\"https://github.com/hiboxsystems/checkstyle-unused-import-bug-reproducer\">https://github.com/hiboxsystems/checkstyle-unused-import-bug-reproducer</a></p>",
  "description_text": "\n\n\n\n\n\n\n\n\n\n\nslovdahl@desk:~/checkstyle-unused-import-bug-reproducer (main)$ cat src/main/java/checkstyle/reproducer/UnusedImportBug.java \npackage checkstyle.reproducer;\n\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.Set;\n\npublic class UnusedImportBug {\n\n    private static final Set FOO;\n    static {\n        FOO = new HashSet<>();\n\n        FOO.add( HashMap[].class.getName() );\n    }\n}\n\n\nslovdahl@desk:~/checkstyle-unused-import-bug-reproducer (main)$ RUN_LOCALE=\"-Duser.language=en -Duser.country=US\"\nslovdahl@desk:~/checkstyle-unused-import-bug-reproducer (main)$ java $RUN_LOCALE -jar checkstyle-9.0.1-all.jar -c gradle/checkstyle/checkstyle.xml src/main/java/checkstyle/reproducer/UnusedImportBug.java\nStarting audit...\n[ERROR] /home/slovdahl/checkstyle-unused-import-bug-reproducer/src/main/java/checkstyle/reproducer/UnusedImportBug.java:3:8: Unused import - java.util.HashMap. [UnusedImports]\nAudit done.\nCheckstyle ends with 1 errors.\n\">slovdahl@desk:~/checkstyle-unused-import-bug-reproducer/src/main/java (main)$ javac checkstyle/reproducer/UnusedImportBug.java \nslovdahl@desk:~/checkstyle-unused-import-bug-reproducer/src/main/java (main)$ \n\nslovdahl@desk:~/checkstyle-unused-import-bug-reproducer (main)$ cat gradle/checkstyle/checkstyle.xml \n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE module PUBLIC\n        \"-//Puppy Crawl//DTD Check Configuration 1.3//EN\"\n        \"http://www.puppycrawl.com/dtds/configuration_1_3.dtd\">\n<module name=\"Checker\">\n    <module name=\"TreeWalker\">\n        <module name=\"UnusedImports\">\n            <property name=\"processJavadoc\" value=\"true\"/>\n        </module>\n    </module>\n</module>\n\n\nslovdahl@desk:~/checkstyle-unused-import-bug-reproducer (main)$ cat src/main/java/checkstyle/reproducer/UnusedImportBug.java \npackage checkstyle.reproducer;\n\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.Set;\n\npublic class UnusedImportBug {\n\n    private static final Set<String> FOO;\n    static {\n        FOO = new HashSet<>();\n\n        FOO.add( HashMap[].class.getName() );\n    }\n}\n\n\nslovdahl@desk:~/checkstyle-unused-import-bug-reproducer (main)$ RUN_LOCALE=\"-Duser.language=en -Duser.country=US\"\nslovdahl@desk:~/checkstyle-unused-import-bug-reproducer (main)$ java $RUN_LOCALE -jar checkstyle-9.0.1-all.jar -c gradle/checkstyle/checkstyle.xml src/main/java/checkstyle/reproducer/UnusedImportBug.java\nStarting audit...\n[ERROR] /home/slovdahl/checkstyle-unused-import-bug-reproducer/src/main/java/checkstyle/reproducer/UnusedImportBug.java:3:8: Unused import - java.util.HashMap. [UnusedImports]\nAudit done.\nCheckstyle ends with 1 errors.\n\n\nDescribe what you expect in detail.\nThe UnusedImport error should not be triggered if an import is actually used.\n\nMCVE: https://github.com/hiboxsystems/checkstyle-unused-import-bug-reproducer"
}